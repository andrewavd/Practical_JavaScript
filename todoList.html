<!DOCTYPE html>

<html>
  <head>
    <title>Practical JavaScript</title>
  </head>
  <body>
    <h1>Todo List</h1>
    <button onclick='buttonHandlers.displayTodosButton()'>Display Todos</button>
    <button onclick='buttonHandlers.toggleAllButton()'>Toggle All</button>
 
  <script>
      var todoList = {
        todos: [],
        displayTodos: function() {
          console.log('My todos:');
          if (this.todos.length === 0) {
            console.log('Your list is empty, what needs to be done?');
          } else {
            for(let i = 0; i < this.todos.length; i++) {
              if (this.todos[i].completed) {
                console.log('(X)', this.todos[i].todoText);
              } else {
                console.log('( )', this.todos[i].todoText);
              }
            }
          }
        },
        addTodo: function(todoText) {
          this.todos.push({
            todoText: todoText,
            completed: false
          })
          this.displayTodos();
        },
        editTodo: function(index, todoText) {
          this.todos[index].todoText = todoText;
          this.displayTodos();
        },
        deleteTodo: function(index) {
          this.todos.splice(index, 1);
          this.displayTodos();
        },
        toggleCompleted: function(index) {
          let todo = this.todos[index];
          todo.completed = !todo.completed;
          this.displayTodos();
        },
        toggleAll: function() {
          let allTrue = true;
          for (let i = 0; i < this.todos.length; i++) {
            if ( this.todos[i].completed === false) {
              allTrue = false;
              break;
            }
          }
          for (let i = 0; i < this.todos.length; i++) {
            if (allTrue) {
              this.todos[i].completed = false;
            } else {
              this.todos[i].completed = true;
            }
          }
          this.displayTodos();      
        }
      };

      var buttonHandlers = {
        displayTodosButton: function() {
          todoList.displayTodos();
        },
        toggleAllButton: function() {
          todoList.toggleAll();
        }
      };

    </script>
  </body>
</html>
